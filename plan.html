<!doctype html>
<html>
<head>
    <meta charset="cp1251">
    <title>GetFavIcon</title>
    <script src="../../web/planlist/planlist.js"></script>
</head>
<body class="make_plan">


 + 1. Минимальная рабочая версия
   + Искать наиболее подходящий размер (с учетом приоритетов)
   + Перекодировать размер и формат, возвращать соответствующий Content-Type
   + Генерировать иконку с ошибкой
   + рисовать различные коды 400, 404, 500
   + прикрутить image4j для поддержки ico файлов
   + разбирать все иконки с сайта
   + кэш
   + протестить
   + создать проект на heroku
 + 2. Минимальная необходимая версия для расширения для хрома
   + HTTP: connection/socket timeout, User-Agent, Redirects, Referer
   + игнорить www, иначе у нас повторное кеширование доменов получается
   + разбить код на логические части
   + дефолтную страницу со справкой
   + опция для оформления кнопки с иконкой
   + замена белого фона на альфа
   + SVGSalamander (metro.yandex.ru)
   + Сервисы Яндекса, Гугла и Мейла
   + favicon для самого сервиса
   + определение button-like иконок
 - 3. Ближайшие важные улучшения
   - в купе с тем, что buttonShaped не нужно масштабировать, getAppropriateImage теперь работает не очень корректно
     одного сортированного списка теперь не достаточно
   - SVG имеет размер - нужно поддерживать их несколько и выбирать лучший, вместе с не векторными изображениями
   - версии сайта http и https могут параллельно висеть в кэше - не хорошо
   - доставать /favicon.ico по дефолту (ebay)
   - запостить баг в svgsalamander
 - 4. Прочие улучшения
   - httpclient бы неплохо прикрутить - лишнее соединение устанавливаться не будет
   - стили для дефолтной страницы-справки
   - выбрать шрифт (положить, если нестандартный), установить правильную высоту и descending (видимо, для drawError)
   - опцию: выводить ошибки в текстовом виде (для статуса не 200)
   - опцию для дебага, показывающую для каждого домена найденные URL, статусы загрузки, размеры, формат
   - проверить, часто ли бывают png под видом ico (например, bing.com) - EOFException, которые кидает image4j - тогда можно пофиксить одной строчкой, jdk должен разобрать
   - улучшить checkButtonShape - на сервисах для yahoo не работает
   ^ еще бы дамп памяти не плохо и возможно времени загрузки процессора
   ? стоит ли держать изображения больше 1000x1000 в памяти?
   ? может быть стоить детектить иконки с круглыми кнопками по аналоги с button-shape
     только в каком виде их транформировать в кнопку?


</body>
</html>